<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>üßßLunar New Year 2026 Countdown </title>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Segoe UI", sans-serif;
}

body {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: radial-gradient(circle at top, #ffe5d0, #ff9a8b 70%);
    color: #5a2a2a;
    text-align: center;
    overflow: hidden;
}

.container {
    background: rgba(255, 255, 255, 0.65);
    backdrop-filter: blur(12px);
    padding: 40px 60px;
    border-radius: 20px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    position: relative;
    z-index: 2;
}

h1 { font-size: 34px; margin-bottom: 10px; }
h2 { font-weight: 400; margin-bottom: 30px; opacity: 0.8; }

.countdown {
    display: flex;
    gap: 25px;
    justify-content: center;
    flex-wrap: wrap;
}

.time-box {
    background: rgba(255,255,255,0.85);
    padding: 20px;
    border-radius: 15px;
    min-width: 100px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.08);
}

.number {
    font-size: 40px;
    font-weight: bold;
}

.label {
    font-size: 13px;
    margin-top: 5px;
    opacity: 0.7;
}

.pip-btn {
    margin-top: 30px;
    padding: 10px 20px;
    background: #ffb347;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
}

.pip-btn:hover {
    background: #ffa726;
}

.footer {
    margin-top: 20px;
    font-size: 13px;
    opacity: 0.7;
}

/* Ng·ª±a linh v·∫≠t */
.horse {
    position: fixed;
    bottom: 10px;
    right: 20px;
    width: 120px;
    z-index: 3;
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%,100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

/* Canvas ph√°o hoa */
#fireworks {
    position: fixed;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 1;
}
</style>
</head>

<body>

<canvas id="fireworks"></canvas>

<div class="container" id="mainContent">
    <h1>üßß Lunar New Year 2026</h1>
    <h2>17 February 2026</h2>

    <div class="countdown">
        <div class="time-box">
            <div id="days" class="number">0</div>
            <div class="label">Days</div>
        </div>
        <div class="time-box">
            <div id="hours" class="number">0</div>
            <div class="label">Hours</div>
        </div>
        <div class="time-box">
            <div id="minutes" class="number">0</div>
            <div class="label">Minutes</div>
        </div>
        <div class="time-box">
            <div id="seconds" class="number">0</div>
            <div class="label">Seconds</div>
        </div>
    </div>

    <button class="pip-btn" onclick="openPiP()">Pin (Picture-in-Picture)</button>

    <div class="footer">
        Countdown to Lunar New Year 2026 üßß
    </div>
</div>


<script>
/* COUNTDOWN */
const targetDate = new Date("2026-02-17T00:00:00").getTime();

function updateCountdown() {
    const now = new Date().getTime();
    const diff = targetDate - now;

    if (diff > 0) {
        days.innerText = Math.floor(diff / (1000*60*60*24));
        hours.innerText = Math.floor((diff/(1000*60*60))%24);
        minutes.innerText = Math.floor((diff/(1000*60))%60);
        seconds.innerText = Math.floor((diff/1000)%60);
    }
}
setInterval(updateCountdown,1000);
updateCountdown();

/* FIREWORKS */
const canvas = document.getElementById("fireworks");
const ctx = canvas.getContext("2d");

function resizeCanvas(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

class Particle{
    constructor(x,y){
        this.x=x;
        this.y=y;
        this.angle=Math.random()*2*Math.PI;
        this.speed=Math.random()*4;
        this.alpha=1;
        this.decay=0.015+Math.random()*0.01;
    }
    update(){
        this.x+=Math.cos(this.angle)*this.speed;
        this.y+=Math.sin(this.angle)*this.speed;
        this.alpha-=this.decay;
    }
    draw(){
        ctx.globalAlpha=this.alpha;
        ctx.fillStyle=`hsl(${Math.random()*360},80%,60%)`;
        ctx.fillRect(this.x,this.y,3,3);
        ctx.globalAlpha=1;
    }
}

let particles=[];

function createFirework(){
    let x=Math.random()*canvas.width;
    let y=Math.random()*canvas.height/2;
    for(let i=0;i<50;i++){
        particles.push(new Particle(x,y));
    }
}

function animate(){
    ctx.fillStyle="rgba(0,0,0,0.1)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    particles.forEach(p=>{p.update();p.draw();});
    particles=particles.filter(p=>p.alpha>0);

    requestAnimationFrame(animate);
}

setInterval(createFirework,800); // b·∫Øn li√™n t·ª•c
animate();


async function openPiP() {
    if (!("documentPictureInPicture" in window)) {
        alert("Browser kh√¥ng h·ªó tr·ª£.");
        return;
    }

    const pipWindow = await documentPictureInPicture.requestWindow({
        width: 360,
        height: 300 // tƒÉng chi·ªÅu cao
    });

    const doc = pipWindow.document;

    doc.body.style.margin = "0";
    doc.body.style.fontFamily = "Segoe UI, sans-serif";
    // D√πng gradient n·ªÅn r·ª±c r·ª°, hi·ªán ƒë·∫°i, kh√¥ng ƒë·ªïi khi resize
    doc.body.style.background = 'linear-gradient(135deg, #ffb347 0%, #ff0844 100%)';
    doc.body.style.display = "flex";
    doc.body.style.alignItems = "center";
    doc.body.style.justifyContent = "center";
    doc.body.style.height = "100vh";

    // Th√™m canvas ph√°o hoa v√†o PiP
    const fwCanvas = doc.createElement('canvas');
    fwCanvas.id = 'pipFireworks';
    fwCanvas.style.position = 'fixed';
    fwCanvas.style.top = '0';
    fwCanvas.style.left = '0';
    fwCanvas.style.width = '100vw';
    fwCanvas.style.height = '100vh';
    fwCanvas.style.pointerEvents = 'none';
    fwCanvas.style.zIndex = '1';
    fwCanvas.style.background = 'transparent';
    doc.body.appendChild(fwCanvas);

    function resizeFWCanvas() {
        fwCanvas.width = doc.documentElement.clientWidth;
        fwCanvas.height = doc.documentElement.clientHeight;
        // ƒê·∫£m b·∫£o m√†u n·ªÅn PiP lu√¥n l√† gradient ƒë·∫πp
        doc.body.style.background = 'linear-gradient(135deg, #ffb347 0%, #ff0844 100%)';
    }
    resizeFWCanvas();
    pipWindow.addEventListener('resize', resizeFWCanvas);

    // Firework logic cho PiP
    const fwCtx = fwCanvas.getContext('2d');
    class PiPParticle {
        constructor(x, y) {
            this.x = x;
            this.y = y;
            this.angle = Math.random() * 2 * Math.PI;
            this.speed = Math.random() * 3.5;
            this.alpha = 1;
            this.decay = 0.018 + Math.random() * 0.012;
        }
        update() {
            this.x += Math.cos(this.angle) * this.speed;
            this.y += Math.sin(this.angle) * this.speed;
            this.alpha -= this.decay;
        }
        draw() {
            fwCtx.globalAlpha = this.alpha;
            fwCtx.fillStyle = `hsl(${Math.random() * 360},80%,60%)`;
            fwCtx.fillRect(this.x, this.y, 2.5, 2.5);
            fwCtx.globalAlpha = 1;
        }
    }
    let fwParticles = [];
    function createPiPFirework() {
        let x = Math.random() * fwCanvas.width;
        let y = Math.random() * fwCanvas.height / 2;
        for (let i = 0; i < 36; i++) {
            fwParticles.push(new PiPParticle(x, y));
        }
    }
    function animatePiPFirework() {
        fwCtx.fillStyle = "rgba(0,0,0,0.10)";
        fwCtx.fillRect(0, 0, fwCanvas.width, fwCanvas.height);
        fwParticles.forEach(p => { p.update(); p.draw(); });
        fwParticles = fwParticles.filter(p => p.alpha > 0);
        pipWindow.requestAnimationFrame(animatePiPFirework);
    }
    setInterval(createPiPFirework, 900);
    animatePiPFirework();

    // N·ªôi dung countdown PiP
    const pipDiv = doc.createElement('div');
    pipDiv.style.position = 'relative';
    pipDiv.style.zIndex = '2';
    pipDiv.style.background = 'rgba(255,255,255,0.18)';
    pipDiv.style.backdropFilter = 'blur(14px)';
    pipDiv.style.backdropFilter = 'blur(10px)';
    pipDiv.style.padding = '32px 18px 32px 18px';
    pipDiv.style.borderRadius = '28px';
    pipDiv.style.width = '92%';
    pipDiv.style.maxWidth = '420px';
    pipDiv.style.boxShadow = '0 10px 30px rgba(0,0,0,0.25)';
    pipDiv.style.textAlign = 'center';
    pipDiv.style.color = 'white';
    pipDiv.style.display = 'flex';
    pipDiv.style.flexDirection = 'column';
    pipDiv.style.alignItems = 'center';
    pipDiv.style.justifyContent = 'center';
    pipDiv.style.height = 'auto';
    pipDiv.style.margin = '0 auto';

    pipDiv.innerHTML = `
        <div style="
            font-size:20px;
            font-weight:600;
            opacity:0.92;
            margin-bottom:18px;
            letter-spacing:1px;
        ">
            Lunar New Year 2026
        </div>
        <div id="pipTimer" style="
            display:flex;
            justify-content:center;
            align-items:center;
            gap:18px;
            margin-top:0;
        "></div>
    `;
    doc.body.appendChild(pipDiv);

    function updatePiP() {
        const now = new Date().getTime();
        const diff = targetDate - now;
        const timer = doc.getElementById("pipTimer");
        if (diff <= 0) {
            timer.innerHTML = `
                <div style="font-size:26px;font-weight:bold;letter-spacing:1px;">
                    üéâ Happy New Year üéâ
                </div>
            `;
            return;
        }
        const d = Math.floor(diff / (1000*60*60*24));
        const h = Math.floor((diff/(1000*60*60))%24);
        const m = Math.floor((diff/(1000*60))%60);
        const s = Math.floor((diff/1000)%60);
        function box(val, label){
            return `
                <div style="
                    min-width:56px;
                    background:rgba(255,255,255,0.13);
                    border-radius:16px;
                    padding:16px 0 10px 0;
                    display:flex;
                    flex-direction:column;
                    align-items:center;
                    box-shadow:0 2px 8px rgba(0,0,0,0.08);
                ">
                    <div style="
                        font-size:28px;
                        font-weight:700;
                        margin-bottom:2px;
                        letter-spacing:1px;
                    ">${val}</div>
                    <div style="
                        font-size:13px;
                        opacity:0.82;
                        font-weight:500;
                        letter-spacing:1px;
                    ">${label}</div>
                </div>
            `;
        }
        timer.innerHTML =
            box(d,"D") +
            box(h,"H") +
            box(m,"M") +
            box(s,"S");
    }
    updatePiP();
    setInterval(updatePiP, 1000);
}

</script>

</body>
</html>
